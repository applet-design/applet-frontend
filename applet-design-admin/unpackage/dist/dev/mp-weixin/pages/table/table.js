(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/table/table"],{20:function(e,a,t){"use strict";(function(e){t(5);o(t(3));var a=o(t(21));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(a.default)}).call(this,t(1)["createPage"])},21:function(e,a,t){"use strict";t.r(a);var o=t(22),s=t(24);for(var n in s)"default"!==n&&function(e){t.d(a,e,(function(){return s[e]}))}(n);t(27);var r,i=t(11),c=Object(i["default"])(s["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);c.options.__file="pages/table/table.vue",a["default"]=c.exports},22:function(e,a,t){"use strict";t.r(a);var o=t(23);t.d(a,"render",(function(){return o["render"]})),t.d(a,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(a,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(a,"components",(function(){return o["components"]}))},23:function(e,a,t){"use strict";var o;t.r(a),t.d(a,"render",(function(){return s})),t.d(a,"staticRenderFns",(function(){return r})),t.d(a,"recyclableRender",(function(){return n})),t.d(a,"components",(function(){return o}));var s=function(){var e=this,a=e.$createElement;e._self._c},n=!1,r=[];s._withStripped=!0},24:function(e,a,t){"use strict";t.r(a);var o=t(25),s=t.n(o);for(var n in o)"default"!==n&&function(e){t.d(a,e,(function(){return o[e]}))}(n);a["default"]=s.a},25:function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=s(t(26));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(){t.e("components/hu-small-table1/hu-small-table1").then(function(){return resolve(t(93))}.bind(null,t)).catch(t.oe)},r={components:{husmalltableOut:n},data:function(){return{tabIndex:0,show:"",userDatas:"",host:o.default.host,contentList:["生活必须物资申请表单","人员健康信息填报表","小区外来人员报备表","出小区申请表"],reciveUserItem:"",reciveUserItemIndex:"",tabBars:[{name:"生活必须物资申请表单",id:"material_application"},{name:"人员健康信息填报表",id:"info"},{name:"小区外来人员报备表",id:"report"},{name:"出小区申请表",id:"application"}],searchInfoChoose:"",searchIfChoose:"",searchPickerIndex:[0,1,2],searches:"",searchPicker:["住址","表单类型","体温"],searchInfo:"",serchInfoIndex:[0,1],searchInfo_one:"筛选条件1",searchInfo_two:"筛选条件2",searchInfo_three:"筛选条件3"}},onLoad:function(){e.setStorage({data:this.tabBars[this.tabIndex].name,key:"tabBarName"});var a=e.getStorageSync("tabBarName");console.log(a),"生活必须物资申请表单"==a?(this.reciveUserItem=["姓名","申请物资名称","住址","是否紧急","申请时间"],this.reciveUserItemIndex=["applicantName","materialName","address","urgent","submitDate"]):"人员健康信息填报表"==a?(this.reciveUserItem=["姓名","体温","住址","最后一次核算时间","提交时间"],this.reciveUserItemIndex=["realName","temperature","address","lastTime","submit"]):"小区外来人员报备表"==a?(this.reciveUserItem=["姓名","审批人","现住址","原住址","申请时间"],this.reciveUserItemIndex=["name","approverId","address","location","submitDate"]):"外出小区申请表"==a&&(this.reciveUserItem=["姓名","外出地点","住址","外出原因","申请时间"],this.reciveUserItemIndex=["applicantName","destination","address","reason","submitDate"]),e.showLoading({title:"数据加载中"});var t=this;e.request({url:t.host+"api/table/getMaterialInfoAllById",data:{approverId:1,ifApproverId:0},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log("查询成功"),""==e.data.data?t.show=!1:t.show=!0,t.userDatas=e.data.data):console.log("查询失败")},fail:function(e){console.log("查询失败111")}}),e.request({url:t.host+"api/getSearch",data:{type:"物资申请"},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log(e),t.searchPicker=e.data.data[0].main,t.searches=e.data.data[1].names):console.log("查询失败")},fail:function(e){console.log("查询失败")}}),e.hideLoading()},methods:{search:function(a){if(this.searchInfoChoose=this.searchInfo[a.detail.value],""!=this.searchInfo||""!=this.searchIfChoose){var t=e.getStorageSync("tabBarName"),o=this.searchInfoChoose;console.log(this.searchInfoChoose);var s=this;if("生活必须物资申请表单"==t){if("物资名称"==this.searchIfChoose)e.request({url:s.host+"api/material/getByName",method:"GET",data:{name:o,approverId:1,ifApp:0},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}});else if("是否紧急"==this.searchIfChoose){var n="";n="是"==this.searchInfoChoose?1:0,e.request({url:this.host+"api/material/getByUrgent",method:"GET",data:{a:n,approverId:1,ifApp:0},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}})}}else if("人员健康信息填报表"==t)"体温异常"==this.searchInfoChoose?e.request({url:this.host+"api/tem/nonormal",method:"GET",data:{},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}}):"体温正常"==this.searchInfoChoose&&e.request({url:this.host+"api/tem/normal",method:"GET",data:{},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}});else if("小区外来人员报备表"==t){var r=s.searchInfoChoose;e.request({url:s.host+"api/report/getAdd",method:"GET",data:{add:r},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}})}else if("出小区申请表"==t){r=s.searchInfoChoose;e.request({url:s.host+"api/leave/getAdd",method:"GET",data:{add:r},header:{token:e.getStorageSync("token")},success:function(e){200==e.data.code&&(""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data)}})}}},clear:function(e){this.searchIfChoose="",this.searchInfoChoose=""},toggleTab:function(a){this.searchIfChoose="",this.searchInfoChoose="",this.tabIndex=a,e.setStorage({data:this.tabBars[this.tabIndex].name,key:"tabBarName"});var t=e.getStorageSync("tabBarName");console.log(t),"生活必须物资申请表单"==t?(this.reciveUserItem=["姓名","申请物资名称","住址","是否紧急","申请时间"],this.reciveUserItemIndex=["applicantName","materialName","address","urgent","submitDate"]):"人员健康信息填报表"==t?(this.reciveUserItem=["姓名","体温","住址","最后一次核算时间","提交时间"],this.reciveUserItemIndex=["realName","temperature","address","lastTime","submit"]):"小区外来人员报备表"==t?(this.reciveUserItem=["姓名","审批人","现住址","原住址","申请时间"],this.reciveUserItemIndex=["name","approverId","address","location","submitDate"]):"出小区申请表"==t&&(this.reciveUserItem=["姓名","外出地点","住址","外出原因","申请时间"],this.reciveUserItemIndex=["applicantName","destination","address","reason","submitDate"]);var o="";0==a?o="api/table/getMaterialInfoAllById":1==a?o="api//table/getHealthInfoAllById":2==a?o="api/table/getReportAllById":3==a&&(o="api/table/getLeaveAllInfo"),e.showLoading({title:"数据加载中"});var s=this;2==a?(e.request({url:s.host+o,data:{approverId:1,ifApproverId:0},header:{token:e.getStorageInfoSync("token")},success:function(e){if(200==e.data.code){console.log("查询成功"),""==e.data.data[0].main?s.show=!1:s.show=!0,s.userDatas=e.data.data[0].main;for(var a=0;a<s.userDatas.length;a++)s.userDatas[a].approverId=e.data.data[1].names[a]}else console.log("查询失败")},fail:function(e){console.log("查询失败")}}),e.hideLoading()):(e.request({url:s.host+o,data:{approverId:1,ifApproverId:0},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log("查询成功"),""==e.data.data?s.show=!1:s.show=!0,s.userDatas=e.data.data):console.log("查询失败")},fail:function(e){console.log("查询失败")}}),e.hideLoading()),0==a?e.request({url:s.host+"api/getSearch",data:{type:"物资申请"},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log(e),s.searchPicker=e.data.data[0].main,s.searches=e.data.data[1].names):console.log("查询失败")},fail:function(e){console.log("查询失败")}}):1==a?e.request({url:s.host+"api/getSearch",data:{type:"健康信息"},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log(e),s.searchPicker=e.data.data[0].main,s.searches=e.data.data[1].names):console.log("查询失败")},fail:function(e){console.log("查询失败")}}):2==a?e.request({url:s.host+"api/getSearch",data:{type:"外来人员"},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log(e),s.searchPicker=e.data.data[0].main,s.searches=e.data.data[1].names):console.log("查询失败")},fail:function(e){console.log("查询失败")}}):3==a&&e.request({url:s.host+"api/getSearch",data:{type:"外出申请"},header:{token:e.getStorageInfoSync("token")},success:function(e){200==e.data.code?(console.log(e),s.searchPicker=e.data.data[0].main,s.searches=e.data.data[1].names):console.log("查询失败")},fail:function(e){console.log("查询失败")}})},tabChange:function(e){this.tabIndex=e.detail.current},bindSearchPicker:function(e){console.log(e),this.searchIfChoose=this.searchPicker[e.detail.value],this.searchInfo=this.searches[e.detail.value]},bindSearchInfo:function(e){this.searchInfoChoose=this.searchInfo[e.detail.value]},backApplication:function(a){console.log(a);var t=this,o=this.tabIndex,s="",n="";0==o?(n="table/getMaterialInfoById",s="物资申请"):1==o?(n="table/getHealthInfoById",s="健康信息"):2==o?(n="table/getReportById",s="外来人员报备"):3==o&&(n="table/getLeaveInfo",s="外出申请"),e.setStorage({data:s,key:"name"}),e.request({url:t.host+"api/"+n,method:"GET",data:{applicantId:a},header:{token:e.getStorageInfoSync("token")},success:function(a){200!=a.data.code?(e.showToast({title:"获取详细信息失败",duration:2e3}),t.detailInfos=""):(t.detailInfos=a.data.data,console.log(t.detailInfos),e.setStorage({key:"detailInfos",data:t.detailInfos}))}}),wx.navigateTo({url:"../../pages3/details/details"})},lookDetails:function(a){var t=this,o=e.getStorageSync("tabBarName");if("人员健康信息填报表"!=o){var s="";"生活必须物资申请表单"==o?s="api/table/accessMaterialById":"小区外来人员报备表"==o?s="api/table/accessReportById":"出小区申请表"==o&&(s="api/table/accessLeaveById"),e.showActionSheet({itemList:["通过","不通过"],success:function(o){0==o.tapIndex?e.request({url:t.host+s,data:{applicantId:a,access:1,approverId:1,result:1},header:{token:e.getStorageInfoSync("token")},success:function(o){if(200==o.data.code){if(e.showToast({title:"审批成功",duration:1e3}),"小区外来人员报备表"==e.getStorageSync("tabBarName")){t.userDatas=o.data.data[0].main;for(var s=0;s<t.userDatas.length;s++)t.userDatas[s].approverId=o.data.data[1].names[s]}else t.userDatas=o.data.data;""==t.userDatas?t.show=!1:t.show=!0,e.request({url:t.host+"api/sendMessage",data:{applicantId:a,type:e.getStorageSync("tabBarName")}})}else e.showToast({title:"审批出错",duration:1e3,icon:"error"})},fail:function(a){e.showToast({title:"审批出错",duration:1e3,icon:"error"})}}):1==o.tapIndex&&e.request({url:t.host+s,data:{applicantId:a,access:-1,approverId:1,result:-1},header:{token:e.getStorageInfoSync("token")},success:function(o){if(200==o.data.code){if(e.showToast({title:"不通过",duration:1e3}),"小区外来人员报备表"==e.getStorageSync("tabBarName")){t.userDatas=o.data.data[0].main;for(var s=0;s<t.userDatas.length;s++)t.userDatas[s].approverId=o.data.data[1].names[s]}else t.userDatas=o.data.data;""==t.userDatas?t.show=!1:t.show=!0,e.request({url:t.host+"api/sendMessage",data:{applicantId:a,type:e.getStorageSync("tabBarName")}})}else e.showToast({title:"审批成功",duration:1e3,icon:"error"})},fail:function(a){e.showToast({title:"审批出错",duration:1e3,icon:"error"})}})}})}else e.showToast({title:"不能审批",duration:1e3,icon:"error"})}}};a.default=r}).call(this,t(1)["default"])},27:function(e,a,t){"use strict";t.r(a);var o=t(28),s=t.n(o);for(var n in o)"default"!==n&&function(e){t.d(a,e,(function(){return o[e]}))}(n);a["default"]=s.a},28:function(e,a,t){}},[[20,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/table/table.js.map